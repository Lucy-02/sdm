# DKB (Domain Knowledge Base) 가이드

## 📍 디렉토리 목적

프로젝트 수행 중 획득한 도메인 지식, 기술적 통찰, 문제 해결 방법을 체계적으로 보존합니다.

## 📝 문서 작성 규칙

### 파일명 형식
```
[global_number]_[topic]_knowledge.md
예: 006_authentication_pattern_knowledge.md
예: 007_performance_optimization_knowledge.md
```

### 📌 번호 할당 필수 확인
**새 DKB 문서 생성 전 반드시:**
1. `.claude/context/index.md` 열기
2. "다음 번호" 확인
3. 해당 번호로 문서 생성
4. index.md에 즉시 기록

### 지식 카테고리
- **Architecture**: 설계 결정, 패턴
- **Performance**: 최적화, 벤치마크
- **Integration**: 외부 시스템 연동
- **Business Logic**: 도메인 규칙
- **Troubleshooting**: 문제 해결
- **Best Practices**: 모범 사례

## 📄 DKB 문서 템플릿

```markdown
# [번호]_[주제] 지식

## 메타데이터
- 카테고리: [Architecture/Performance/Integration/etc]
- 작성일: YYYY-MM-DD
- 관련 작업: [plan/todo/review 링크]
- 태그: [#태그1, #태그2]
- 난이도: [쉬움/보통/어려움]
- 소요시간: [이 지식 획득에 걸린 시간]

## 문제 정의
[해결하려던 문제의 명확한 설명]

### 배경
[문제가 발생한 맥락과 상황]

### 제약사항
- [기술적 제약]
- [비즈니스 제약]
- [시간/자원 제약]

## 해결 방안

### 검토한 옵션들
1. **옵션 1**: [설명]
   - 장점: [...]
   - 단점: [...]
   - 불채택 이유: [...]

2. **옵션 2**: [설명]
   - 장점: [...]
   - 단점: [...]

### 선택한 솔루션
[최종 선택한 방안과 이유]

## 구현 상세

### 코드 예제
\`\`\`typescript
// 실제 동작하는 코드
// 복사해서 바로 사용 가능하게
import { necessary } from 'dependencies';

export function solution() {
    // 구현 내용
}
\`\`\`

### 설정/구성
\`\`\`json
{
    "configuration": "필요한 설정값"
}
\`\`\`

### 단계별 가이드
1. [단계 1]: 구체적 지시
2. [단계 2]: 명령어나 코드
3. [단계 3]: 검증 방법

## 결과 및 영향

### 성능 개선
| 메트릭 | 이전 | 이후 | 개선율 |
|--------|------|------|--------|
| [측정항목] | [값] | [값] | [%] |

### 영향 범위
- 영향받는 컴포넌트: [목록]
- 부작용: [있다면]
- 롤백 계획: [필요시]

## 검증 방법

### 테스트 코드
\`\`\`typescript
describe('Solution Test', () => {
    it('should work correctly', () => {
        // 테스트 코드
    });
});
\`\`\`

### 검증 체크리스트
- [ ] [확인 항목 1]
- [ ] [확인 항목 2]

## 주의사항

### 일반적인 실수
1. [실수 1]: [설명과 예방법]
2. [실수 2]: [설명과 예방법]

### 엣지 케이스
- [상황 1]: [처리 방법]
- [상황 2]: [처리 방법]

## 관련 자료

### 내부 문서
- [관련 DKB 문서]
- [Structure 문서]
- [Lexicon 용어]

### 외부 참조
- [공식 문서 링크]
- [Stack Overflow 답변]
- [블로그 포스트]

## 재사용 가이드

### 적용 가능한 상황
- [상황 1]
- [상황 2]

### 필요한 수정사항
- [다른 프로젝트 적용 시]
- [스케일 변경 시]

## 업데이트 이력
| 날짜 | 변경내용 | 이유 |
|------|----------|------|
| YYYY-MM-DD | 최초 작성 | - |
```

## 🎯 작성 기준

### DKB 작성이 필요한 경우
- ⏱️ 해결에 2시간 이상 소요
- 🔄 재발 가능성 있는 문제
- 💡 창의적/독특한 해결책
- 📚 복잡한 도메인 로직
- 🐛 디버깅 어려웠던 이슈
- ⚡ 성능 최적화 성과

### 작성 깊이
- **간단** (30분 이하): 핵심만 간략히
- **보통** (2시간 이하): 상세 설명과 코드
- **복잡** (2시간 이상): 전체 과정과 대안 포함

## ✅ 체크리스트

### 작성 전
- [ ] 정말 보존할 가치가 있는가?
- [ ] 기존 DKB와 중복되지 않는가?
- [ ] 재사용 가능한 지식인가?

### 작성 중
- [ ] 문제를 명확히 정의했는가?
- [ ] 코드는 실행 가능한가?
- [ ] 검증 방법을 제공했는가?

### 작성 후
- [ ] Global numbering 할당
- [ ] context/index.md 업데이트
- [ ] 관련 문서에서 참조
- [ ] 태그 적절히 부여

## 📌 주의사항

- 추상적 설명보다 구체적 예제
- "왜"에 대한 설명 중시
- 실패 경험도 가치있는 지식
- 미래의 나를 위해 작성

## 🕐 Time MCP 필수 사용

**⚠️ DKB 문서의 모든 timestamp는 `mcp__time__get_current_time` 도구로 조회하세요.**

### 적용 위치
- 작성일
- 소요시간 계산
- 업데이트 이력 날짜

### ❌ 금지
- 시간 추측 금지
- 이전 시간 재사용 금지