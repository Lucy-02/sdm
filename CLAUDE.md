# CLAUDE.md

이 파일은 이 저장소의 코드로 작업할 때 Claude Code(claude.ai/code)에 대한 지침을 제공합니다.

## 개요

이 프로젝트는 체계적인 문서화 기반 개발 워크플로우를 따릅니다. 모든 작업은 구조화된 프로세스를 통해 계획되고, 문서화되고, 검토되고, 추적되어야 합니다. 지식과 용어는 지속적으로 캡처되고 유지됩니다. 이 접근 방식은 개발 수명 주기 전반에 걸쳐 투명성, 추적 가능성 및 지식 보존을 보장합니다.

## ⚠️ 핵심 원칙: 실시간 문서 동기화

> **절대 규칙**: 다음 작업으로 이동하기 전에 현재 작업과 관련된 모든 문서를 즉시 업데이트해야 합니다.

### 문서 동기화가 필수적인 이유

1. **컨텍스트 손실 방지**: Context compact 후에도 작업 연속성 보장
2. **일관성 유지**: 모든 문서가 현재 상태를 정확히 반영
3. **지식 보존**: 학습한 내용을 즉시 캡처하여 손실 방지
4. **협업 효율성**: 다른 개발자나 Claude 세션이 정확한 상태 파악 가능

### 즉시 동기화해야 하는 시점

- ✅ 파일을 생성/수정/삭제한 **직후**
- ✅ 하위 작업(subtask)을 완료한 **직후**
- ✅ 새로운 패턴이나 지식을 발견한 **직후**
- ✅ 사전에 추가할 용어를 접한 **직후**
- ✅ 차단 요소(blocker)를 발견한 **직후**
- ✅ 아키텍처 결정을 내린 **직후**
- ✅ 다음 작업 단계로 넘어가기 **직전**

### ❌ 절대 하지 말아야 할 것

- ❌ "나중에 한 번에 문서화하겠다" - 절대 금지
- ❌ 여러 작업을 완료한 후 일괄 문서화 - 절대 금지
- ❌ 문서 동기화 없이 다음 파일 작업 시작 - 절대 금지
- ❌ "작업이 다 끝나면 문서화" - 절대 금지

## Context Compact 복구 프로토콜

### Context Compact란?

Context compact는 대화가 길어져 토큰 한계에 도달할 때 발생하며, 이전 대화 내용이 요약되고 컨텍스트가 재설정됩니다.

### Context Compact 직후 필수 작업 순서

Context compact가 발생하면 **즉시** 다음 순서를 따르십시오:

#### 1단계: 상태 파악 (읽기 단계)

```
필수 읽기 순서:
1. .claude/current/current.md (최우선)
2. 현재 작업 중인 계획 문서 (.claude/plan/XXX_plan.md)
3. 현재 작업 중인 할 일 문서 (.claude/todo/XXX_todo.md)
4. 관련 DKB 항목들 (current.md에 명시된)
5. 관련 구조 문서들 (작업 중인 파일의)
```

**읽기 체크리스트**:

- [ ] current.md의 "현재 상태" 섹션을 읽고 정확한 작업 위치 파악
- [ ] "다음 즉시 수행할 단계" 섹션 확인
- [ ] "활성 문서" 섹션의 모든 문서 경로 확인 및 열람
- [ ] "중요한 결정/발견" 섹션 검토
- [ ] "차단 요소/대기 중" 섹션 확인

#### 2단계: 컨텍스트 검증

```
검증 사항:
- 문서화된 파일들이 실제로 존재하는가?
- 문서에 기록된 마지막 상태가 현재 코드와 일치하는가?
- 진행 중이던 하위 작업이 완료되었는가?
- 대기 중인 결정 사항이 있는가?
```

#### 3단계: 상태 업데이트 및 재개

```
재개 전 업데이트:
1. current.md의 "세션 정보" 업데이트
   - 마지막 업데이트: [현재 시간]
   - 세션 목적: [context compact 후 재개]

2. "현재 상태" 섹션 재확인 및 필요시 수정

3. "다음 즉시 수행할 단계" 검토 및 업데이트
```

#### 4단계: 작업 재개

- 문서화된 정확한 지점에서 작업 재개
- 첫 번째 작업 완료 후 즉시 current.md 및 관련 문서 업데이트

### Context Compact 후 금지 사항

- ❌ 문서를 읽지 않고 바로 작업 시작
- ❌ 사용자에게 "어디까지 했나요?" 질문 (문서에 다 있음)
- ❌ 새로운 방향으로 작업 시작 (문서화된 계획 따르기)
- ❌ 이전 결정 사항 무시

## 작업 연속성 프로토콜

### 목적

컨텍스트 재설정, 세션 시간 초과 또는 다른 작업 간 전환 후에도 원활한 작업 지속을 보장합니다. `current/current.md` 파일은 즉각적인 작업 재개를 가능하게 하는 영구적인 상태 추적기 역할을 합니다.

### 중요 규칙

다음과 같은 경우 **항상** `current/current.md`를 첫 번째 작업으로 생성하거나 업데이트하십시오:

- 새 작업 세션 시작 시
- 중단 후 작업 재개 시
- 다른 작업 간 전환 시
- **Context compact를 받은 직후**
- 작업 구현을 시작하기 전
- **각 주요 하위 작업 완료 직후**

### current.md 구조 (상세화)

파일은 매번 완전히 다시 작성되어야 하며(추가가 아님) 다음을 포함해야 합니다:

```markdown
# 현재 작업 세션

## 세션 정보

- 시작: [날짜시간]
- 마지막 업데이트: [날짜시간]
- 세션 목적: [간략한 설명]
- Context Compact 횟수: [이 작업에서 발생한 횟수]

## 활성 작업

- 작업 이름: [수행 중인 구체적인 작업]
- 현재 단계: [계획/할일/구현/검토]
- 시작: [이 작업이 시작된 시간]
- 예상 완료: [예상 시간]
- 전체 진행률: [X/Y 하위 작업 완료]

## 이전 작업의 컨텍스트

[주요 결정과 발견을 포함하여 이 세션 이전에 수행된 관련 작업의 요약]

### 주요 마일스톤

- [날짜시간]: [완료된 주요 마일스톤 1]
- [날짜시간]: [완료된 주요 마일스톤 2]

## 현재 상태

### 정확한 작업 위치

- 파일: [정확한 파일 경로, 예: src/components/Auth.tsx]
- 함수/클래스: [작업 중인 구체적인 함수명]
- 줄 번호: [작업 중인 줄 범위, 예: 45-67]
- 마지막 작업: [막 완료한 작업]
- 다음 작업: [바로 다음에 할 작업]

### 코드 변경 상태

- 생성된 파일: [경로 목록]
- 수정된 파일: [경로 목록]
- 삭제된 파일: [경로 목록]
- 대기 중인 변경: [아직 적용하지 않은 계획된 변경]

## 다음 즉시 수행할 단계

### 단기 (현재 세션)

1. [구체적인 다음 작업] - 예상 시간: [X분]
2. [그 다음 작업] - 예상 시간: [Y분]
3. [후속 작업] - 예상 시간: [Z분]

### 중기 (오늘/이번 주)

- [더 큰 목표 1]
- [더 큰 목표 2]

## 중요한 결정/발견

### 결정 사항

- [날짜시간]: [결정 1]
  - 근거: [왜 이렇게 결정했는지]
  - 영향: [이 결정의 영향 범위]
  - 대안: [고려했지만 선택하지 않은 대안]

### 주요 발견

- [날짜시간]: [발견 1]
  - 영향: [이 발견의 중요성]
  - 조치: [이 발견으로 인한 조치 사항]

## 활성 문서 (상세 경로)

### 워크플로우 문서

- 계획: `.claude/plan/XXX_feature_name.md`
  - 상태: [승인됨/검토중/대기중]
  - 선택된 옵션: [옵션 번호]
  - 마지막 업데이트: [날짜시간]
- 할 일: `.claude/todo/XXX_feature_name_todo.md`
  - 현재 단계: [단계 번호 및 이름]
  - 현재 하위 작업: [하위 작업 이름]
  - 완료율: [X/Y]
  - 마지막 업데이트: [날짜시간]
- 검토: `.claude/review/XXX_feature_name_review.md`
  - 상태: [작성중/완료/피드백대기]
  - 마지막 업데이트: [날짜시간]

### 지식 문서

- DKB 참조:
  - `.claude/DKB/XXX_topic.md` - [관련성 설명]
  - `.claude/DKB/YYY_pattern.md` - [관련성 설명]
- 사전 참조:
  - `.claude/lexicon/XXX_technical_terms.md#term1` - [용어명]
  - `.claude/lexicon/YYY_business_terms.md#term2` - [용어명]

### 구조 문서

- 작업 중인 파일의 구조 문서:
  - `.claude/structure/src/components.md`
  - `.claude/structure/src/services.md`
- 영향받는 아키텍처 문서:
  - `.claude/structure/architecture.puml`
  - `.claude/structure/data-flow.puml`

### 개요 문서 (업데이트 필요 여부)

- `.claude/plan/000_overview.md` - [업데이트 필요: 예/아니오]
- `.claude/todo/000_overview.md` - [업데이트 필요: 예/아니오]
- `.claude/DKB/000_overview.md` - [업데이트 필요: 예/아니오]
- `.claude/structure/000_overview.md` - [업데이트 필요: 예/아니오]

## 차단 요소/대기 중

### 차단 요소

- [날짜시간]: [차단 요소 설명]
  - dev_action 참조: `.claude/dev_action/XXX_action.md`
  - 영향: [이것이 차단하는 작업]
  - 우선순위: [높음/중간/낮음]

### 대기 중인 결정

- [날짜시간]: [대기 중인 결정]
  - 옵션: [옵션 A, 옵션 B]
  - 기한: [결정 필요 시점]

## 명령/도구 컨텍스트

### 최근 명령 히스토리

- [시간]: [명령] → [결과 요약]
- [시간]: [명령] → [결과 요약]

### 활성 도구 컨텍스트

- Sequential Thinking: [마지막 사용: 결정 주제]
- Serena: [마지막 사용: 탐색/수정 대상]
- Context7: [마지막 사용: 조회한 라이브러리]

### 환경 상태

- 작업 디렉토리: [현재 디렉토리]
- 실행 중인 프로세스: [해당하는 경우]
- 환경 변수: [관련 설정]
- 테스트 상태: [마지막 테스트 결과]

## 문서 동기화 체크리스트

이 current.md를 업데이트할 때 함께 확인할 사항:

- [ ] 할 일 문서의 진행 상황 업데이트됨
- [ ] 구조 문서가 코드 변경 반영됨
- [ ] 새 DKB 항목 생성 및 링크됨
- [ ] 새 사전 용어 추가됨
- [ ] 관련 개요 문서 업데이트됨
- [ ] 모든 파일 경로가 정확함
- [ ] 모든 상호 참조 링크가 유효함

## 다음 세션 준비

- 예상 재개 시점: [시간/날짜]
- 재개 시 우선 확인사항: [중요한 확인 사항]
- 준비 필요 사항: [다음에 필요한 정보/자료]
```

### 워크플로우와의 통합

1. **계획 단계 전**:

   - current.md 확인하여 진행 중인 작업 파악
   - 새 작업 시작 시 current.md 생성

2. **할 일 단계 전**:

   - 승인된 계획 참조로 current.md 업데이트
   - 모든 관련 문서 경로를 current.md에 추가

3. **구현 중**:

   - **각 주요 하위 작업 후 즉시 current.md 업데이트**
   - 파일 변경 시 즉시 "코드 변경 상태" 섹션 업데이트
   - 결정 사항 발생 시 즉시 "중요한 결정/발견" 섹션 업데이트

4. **검토 단계 전**:

   - 완료 상태로 current.md 업데이트
   - 모든 문서 동기화 체크리스트 완료 확인

5. **중단 시**:
   - current.md에 완전한 상태 저장
   - "다음 세션 준비" 섹션 작성

### 복구 프로토콜

작업 재개 시:

1. 먼저 `.claude/current/current.md` 읽기
2. "활성 문서" 섹션의 모든 문서 경로 확인 및 열람
3. 현재 상태가 문서화된 상태와 일치하는지 확인
4. 문서화된 정확한 지점에서 재개
5. 새 세션 시작 시간으로 파일 업데이트

## 핵심 워크플로우 프로세스

### 1. 계획 단계

- `plan/` 디렉토리에 정확히 3가지 옵션이 있는 계획 문서 생성
- 각 옵션은 최소 3개 항목이 포함된 상세한 장단점 분석을 포함해야 함
- 가능한 경우 정량적 메트릭 제공 (시간, 비용, 위험 수준)
- 모든 옵션을 요약한 비교 분석 표 포함
- 구체적인 이유와 함께 명확한 권장 사항 제시
- 사용자가 옵션을 선택할 체크박스 섹션 추가
- 사용자가 선택한 옵션을 체크할 때까지 대기
- 사용자의 근거와 함께 선택한 옵션 문서화
- **계획 승인 즉시 current.md 업데이트**

### 2. 할 일 단계

- 승인된 계획을 기반으로 작업을 단계별로 나눈 상세한 할 일 항목 생성
- 각 단계는 장단점이 있는 2-3개의 구현 옵션을 가져야 함
- 구체적인 기술 세부사항 포함 (의존성, 도구, 명령어)
- 각 단계의 접근 방식에 대한 체크박스 선택 추가
- 각 작업의 시간 추정 (시간/일)
- 차단 요소와 의존성을 명시적으로 식별
- 사용자가 각 단계에 대해 선택한 접근 방식을 체크할 때까지 대기
- TodoWrite 도구를 사용하여 정기적인 상태 업데이트로 진행 상황 추적
- **할 일 승인 즉시 current.md의 "활성 문서" 섹션 업데이트**

### 3. 구현 단계

- 승인된 할 일을 기반으로 작업 실행
- 2개 이상의 대안이 필요한 결정에는 mcp\_\_sequential-thinking 사용
- **모든 하위 작업 완료 후 즉시:**
  1. 할 일 진행 상황 업데이트
  2. current.md 업데이트
  3. 구조 문서 동기화
  4. 관련 개요 업데이트
- 외부 도움이 필요한 경우 즉시 dev_action 항목 생성
- 명확하지 않은 문제 해결 후 즉시 DKB 업데이트
- 처음 접하는 경우 즉시 사전에 새로운 용어 추가
- 각 원자적 변경 후 테스트하고 결과 문서화
- 각 코드 변경 후 모든 관련 문서 동기화

### 4. 검토 단계

- 마지막 할 일 항목 완료 직후 검토 문서 생성
- 구체적인 메트릭 포함 (성능, 테스트 커버리지, 코드 라인 수)
- 원래 계획에서 벗어난 모든 사항을 정당화와 함께 문서화
- DKB/사전 항목 링크와 함께 캡처된 모든 새로운 지식 나열
- 사용자 피드백을 위한 3-5개의 구체적인 질문 제공
- 우선순위 수준과 함께 구체적인 다음 단계 제안
- 사용자 확인 받기 및 같은 세션 내에서 피드백 구현
- **작업 종료 전 모든 문서의 최종 동기화 및 current.md 완료 상태 업데이트**

## 디렉토리 구조

```
project-root/.claude
├── plan/                    # 옵션이 포함된 계획 문서
│   ├── 000_overview.md     # 모든 계획의 개요
│   ├── 001_feature_x.md    # 기능 X에 대한 계획
│   └── ...
├── todo/                    # 승인된 계획 기반 할 일 문서
│   ├── 000_overview.md     # 모든 할 일의 개요
│   ├── 001_feature_x_todo.md
│   └── ...
├── review/                  # 완료된 작업의 검토 문서
│   ├── 000_overview.md     # 모든 검토의 개요
│   ├── 001_feature_x_review.md
│   └── ...
├── structure/               # 실제 프로젝트 구조의 1:1 매핑
│   ├── 000_overview.md     # 프로젝트 구조 개요
│   ├── src/                # 실제 src 디렉토리 미러링
│   │   ├── components.md   # 모든 컴포넌트 문서화
│   │   ├── services.md     # 모든 서비스 문서화
│   │   └── ...
│   ├── architecture.puml   # 시스템 아키텍처 다이어그램
│   └── ...
├── DKB/                     # 도메인 지식 기반
│   ├── 000_overview.md     # 지식 기반 개요
│   ├── 001_architecture.md # 아키텍처 결정 사항
│   ├── 002_patterns.md     # 사용된 디자인 패턴
│   └── ...
├── lexicon/                 # 용어 및 정의
│   ├── 000_overview.md     # 사전 개요
│   ├── 001_technical_terms.md
│   ├── 002_business_terms.md
│   └── ...
├── history/                 # 전체 작업 히스토리
│   ├── 000_overview.md     # 히스토리 개요
│   ├── 001_2024_01_feature_x.md
│   └── ...
├── current/                 # 작업 연속성 추적
│   └── current.md          # 현재 세션 상태
└── dev_action/             # 필요한 외부 개발자 액션
    ├── 000_overview.md     # 개발 액션 개요
    ├── 001_setup_database.md
    └── ...
```

## 문서 표준

### 명명 규칙

- 모든 문서는 3자리 숫자로 시작해야 함 (예: 001*, 002*)
- 모든 디렉토리의 첫 번째 문서는 `000_overview.md`여야 함
- 번호 뒤에 설명적인 이름 사용
- 파일 이름의 공백은 밑줄 사용

### 문서 링크 (경로 수정)

- 내부 링크는 항상 `.claude/` 루트부터 시작하는 상대 경로 사용
- 형식: `[링크 텍스트](.claude/directory/001_document.md)`
- 실제 프로젝트 파일 참조 시: `src/components/Auth.tsx` (프로젝트 루트 기준)
- 구조 문서 참조 시: `.claude/structure/src/components.md`
- 모든 파일에서 관련 문서 상호 참조
- 해당되는 경우 양방향 링크 유지

**경로 예제**:

```markdown
잘못된 예:

- [Component](.claude/.claude/src/components/Component.tsx)
- [DKB](DKB/001_pattern.md)
- [계획](../plan/001_plan.md)

올바른 예:

- 실제 파일: [Component](src/components/Component.tsx)
- 구조 문서: [Component 문서](.claude/structure/src/components.md)
- DKB 문서: [패턴 문서](.claude/DKB/001_pattern.md)
- 계획 문서: [기능 X 계획](.claude/plan/001_feature_x.md)
```

### 문서 동기화 (강화된 규칙)

#### 동기화 트리거 (즉시 실행)

모든 원자적 작업 후 **즉시** 동기화:

1. **파일 작업 후**:

   - 파일 생성 → 구조 문서에 추가 + 개요 업데이트 + current.md 업데이트
   - 파일 수정 → 구조 문서 업데이트 + current.md 업데이트
   - 파일 삭제 → 구조 문서 표시 + 관련 문서 링크 정리 + current.md 업데이트

2. **지식 발견 후**:

   - 새 패턴 발견 → DKB 항목 생성 + DKB 개요 업데이트 + current.md에 링크 추가
   - 새 용어 접함 → 사전에 추가 + 사전 개요 업데이트 + current.md에 링크 추가

3. **작업 진행 후**:

   - 하위 작업 완료 → 할 일 체크 + current.md "현재 상태" 업데이트
   - 결정 내림 → current.md "중요한 결정" 섹션 업데이트
   - 차단 발견 → dev_action 생성 + current.md "차단 요소" 업데이트

4. **아키텍처 변경 후**:
   - 구조 변경 → 다이어그램 업데이트 + 구조 문서 업데이트 + current.md 업데이트

#### 동기화 체크리스트 (각 작업마다)

각 단위 작업 완료 시 다음을 확인:

```markdown
- [ ] 할 일 문서 진행 상황 업데이트됨
- [ ] current.md "현재 상태" 섹션 업데이트됨
- [ ] current.md "다음 즉시 수행할 단계" 업데이트됨
- [ ] 변경된 파일의 구조 문서 업데이트됨
- [ ] 관련 개요 파일 업데이트됨
- [ ] 새 DKB 항목 생성 및 링크됨
- [ ] 새 사전 용어 추가됨
- [ ] 모든 상호 참조 링크가 유효함
- [ ] 아키텍처 다이어그램이 최신 상태임
- [ ] current.md "문서 동기화 체크리스트" 완료됨
```

#### 동기화 실패 방지

```
⚠️ 다음 작업 시작 전 반드시 확인:
1. 이전 작업의 모든 문서가 동기화되었는가?
2. current.md가 현재 상태를 정확히 반영하는가?
3. 모든 파일 경로가 정확하고 접근 가능한가?
4. 개요 파일들이 최신 상태인가?

확인되지 않으면 다음 작업 시작 금지!
```

#### 동일한 작업에서 영향받는 모든 문서 업데이트

- 구조 문서는 파일 변경 사항을 즉시 반영해야 함
- 개요 파일은 새 항목을 포함해야 함
- 상호 참조는 양방향이어야 함
- 관련 DKB/사전 항목은 다시 링크해야 함
- **current.md는 모든 변경 사항을 추적해야 함**

## 계획 문서

### 구조

```markdown
# [번호]\_[작업 이름] 계획

## 컨텍스트

- 요청 링크: [.claude/history/XXX_request.md]
- 관련 DKB: [.claude/DKB/XXX_topic.md]
- 영향받는 파일:
  - [src/components/Auth.tsx](src/components/Auth.tsx)
  - [src/services/auth.service.ts](src/services/auth.service.ts)
- 관련 구조 문서:
  - [.claude/structure/src/components.md](.claude/structure/src/components.md)
  - [.claude/structure/src/services.md](.claude/structure/src/services.md)
- 날짜: YYYY-MM-DD

## 목표

[측정 가능한 성공 기준과 함께 달성해야 할 사항의 명확한 설명]

## 옵션 분석

### 옵션 1: [설명적 이름]

**접근 방식**: [구현 접근 방식의 자세한 설명]

**장점**:

- [구체적 이익이 포함된 장점 1]
- [정량화된 영향이 포함된 장점 2]
- [사용 사례 시나리오가 포함된 장점 3]

**단점**:

- [완화 전략이 포함된 단점 1]
- [위험 평가가 포함된 단점 2]
- [해당되는 경우 우회 방법이 포함된 단점 3]

**기술 세부사항**:

- 구현 시간: [X 시간/일]
- 의존성: [특정 라이브러리/도구 나열]
- 주요 변경 사항: [예/아니오 - 예인 경우 세부사항]

**비용-편익 분석**:

- 노력: [낮음/중간/높음] - [X 개발자 일]
- 위험: [낮음/중간/높음] - [구체적 위험]
- 유지 관리 부담: [낮음/중간/높음]
- 성능 영향: [긍정적/중립적/부정적]

**권장되는 경우**: [이 옵션이 뛰어난 특정 시나리오]

### 옵션 2: [설명적 이름]

[옵션 1과 동일한 구조]

### 옵션 3: [설명적 이름]

[옵션 1과 동일한 구조]

## 비교 분석

| 기준      | 옵션 1 | 옵션 2 | 옵션 3 |
| --------- | ------ | ------ | ------ |
| 구현 시간 | X 일   | Y 일   | Z 일   |
| 위험 수준 | 낮음   | 중간   | 높음   |
| 확장성    | 우수   | 양호   | 보통   |
| 유지 관리 | 낮음   | 중간   | 높음   |
| 성능      | +10%   | 중립   | -5%    |
| 비용      | $X     | $Y     | $Z     |
| 학습 곡선 | 최소   | 보통   | 가파름 |

## 아키텍처 다이어그램

[각 옵션의 아키텍처 영향을 보여주는 PlantUML 다이어그램 생성 - 시각적 표현이 옵션 간 차이점을 명확히 하는 데 도움이 될 때 사용]

## 권장 사항

**권장 옵션**: 옵션 [X]

**이유**:

1. [증거가 포함된 주요 이유]
2. [메트릭이 포함된 보조 이유]
3. [장기적 관점의 추가 고려사항]

**수용된 절충안**:

- [절충안 1 및 수용 가능한 이유]
- [절충안 2 및 완화 계획]

## 옵션 선택

다음 중 하나를 선택하여 확인란을 체크해 주세요:

- [ ] 옵션 1: [이름]
- [ ] 옵션 2: [이름]
- [ ] 옵션 3: [이름]

## 결정

**선택된 옵션**: [사용자가 옵션 체크 후 채워질 예정]
**근거**: [제공된 경우 사용자의 이유]
**승인자**: [사용자]
**날짜**: [승인 날짜]
**추가 제약 사항**: [사용자가 지정한 제약 사항]

## 문서 동기화 완료

- [ ] current.md 업데이트됨
- [ ] plan/000_overview.md 업데이트됨
- [ ] 관련 DKB 항목 링크됨
```

## 할 일 문서

### 구조

```markdown
# [번호]\_[작업 이름] 할 일

## 참조

- 계획: [.claude/plan/XXX_plan.md]
- 관련 할 일: [.claude/todo/XXX_todo.md]
- 구조 문서: [.claude/structure/...]

## 작업 분류

### 1단계: [단계 이름]

#### 옵션 A: [설명적 이름]

- [ ] 작업 1
- [ ] 작업 2

#### 옵션 B: [설명적 이름]

- [ ] 대체 작업 1
- [ ] 대체 작업 2

**권장 사항**: 옵션 [A/B] 이유: [이유]

#### 1단계 선택

하나의 옵션을 선택하세요:

- [ ] 옵션 A: [이름]
- [ ] 옵션 B: [이름]

### 2단계: [단계 이름]

[동일한 구조]

## 구현 접근 방식

**단계별 선택된 접근 방식**:

- 1단계: [사용자 선택 후 채워질 예정]
- 2단계: [사용자 선택 후 채워질 예정]
- 3단계: [사용자 선택 후 채워질 예정]

**승인자**: [사용자]
**날짜**: [승인 날짜]

## 진행 상황 추적

- 시작: [날짜]
- 완료: [날짜]
- 상태 업데이트:
  - [날짜시간]: [하위 작업] 완료 - 관련 문서 동기화됨
  - [날짜시간]: [하위 작업] 진행중

## 문서 동기화 이력

- [날짜시간]: current.md 업데이트
- [날짜시간]: 구조 문서 동기화
- [날짜시간]: DKB 항목 추가
```

## 검토 문서

### 구조

```markdown
# [번호]\_[작업 이름] 검토

## 참조

- 계획: [.claude/plan/XXX_plan.md]
- 할 일: [.claude/todo/XXX_todo.md]
- 관련 DKB: [.claude/DKB/XXX_topic.md]
- 히스토리: [.claude/history/XXX_history.md]

## 수정된 파일

### 생성됨

- [src/components/NewComponent.tsx](src/components/NewComponent.tsx) - 새 인증 컴포넌트
  - 구조 문서: [.claude/structure/src/components.md](.claude/structure/src/components.md)
- [tests/auth.test.ts](tests/auth.test.ts) - 테스트 스위트
  - 구조 문서: [.claude/structure/tests/tests.md](.claude/structure/tests/tests.md)

### 수정됨

- [src/services/api.service.ts](src/services/api.service.ts) - 인증 헤더 추가 (45-67번째 줄)
  - 구조 문서: [.claude/structure/src/services.md](.claude/structure/src/services.md)
- [src/routes/index.ts](src/routes/index.ts) - 인증 라우트 추가 (23-30번째 줄)
  - 구조 문서: [.claude/structure/src/routes.md](.claude/structure/src/routes.md)

### 삭제됨

- [src/legacy/oldAuth.js](src/legacy/oldAuth.js) - 새 시스템으로 교체
  - 구조 문서에서 제거됨

## 요약

[정량화된 결과와 함께 달성한 내용의 간략한 요약]

## 구현 세부사항

### 수행한 작업

- [파일 참조가 포함된 세부사항 1]
- [특정 줄 번호가 포함된 세부사항 2]
- [성능 메트릭이 포함된 세부사항 3]

### 내린 주요 결정

- [결정 1] - 근거: [이유]
  - 영향: [영향받은 파일/컴포넌트]
  - 고려된 대안: [무엇이며 거부된 이유]
- [결정 2] - 근거: [이유]
  - 절충안: [어떤 이익을 위해 무엇을 희생했는지]

### 직면한 도전 과제

- [도전 과제 1]
  - 근본 원인: [기술적 설명]
  - 해결책: [어떻게 해결했는지]
  - 예방: [향후 어떻게 피할 것인지]

### 캡처된 지식

- 새 DKB 항목:
  - [.claude/DKB/XXX_new_pattern.md](.claude/DKB/XXX_new_pattern.md) - 인증 패턴
  - [.claude/DKB/YYY_performance.md](.claude/DKB/YYY_performance.md) - 캐싱 전략
- 새 용어:
  - [.claude/lexicon/XXX_terms.md#term1](.claude/lexicon/XXX_terms.md#term1)
  - [.claude/lexicon/XXX_terms.md#term2](.claude/lexicon/XXX_terms.md#term2)

## 메트릭 및 검증

### 성능 메트릭

- 응답 시간: [이전] → [이후] (X% 개선)
- 메모리 사용량: [이전] → [이후]
- 번들 크기: [이전] → [이후]

### 테스트 커버리지

- 단위 테스트: [X]% 커버리지 (+Y%)
- 통합 테스트: [A]개 테스트 추가
- E2E 테스트: [B]개 시나리오 커버

### 코드 품질

- [ ] 모든 린팅 규칙 통과
- [ ] 타입 검사 통과
- [ ] 보안 취약점 없음
- [ ] 문서화 업데이트
- [ ] 구조 문서 동기화

## 아키텍처 변경

[아키텍처가 수정된 경우 이전/이후 상태를 보여주는 PlantUML 다이어그램 생성]

## 사용자 피드백 필요

1. [컨텍스트와 옵션이 포함된 구체적인 질문]
2. [승인이 필요한 성능 절충안]
3. [사용자에게 영향을 미치는 UI/UX 변경]
4. [마이그레이션 계획이 필요한 주요 변경 사항]
5. [리소스 할당 질문]

## 다음 단계

### 즉시 (24시간 이내)

- [ ] [높은 우선순위 작업] - [담당자]
- [ ] [모니터링 설정] - [추적할 메트릭]

### 단기 (1주일 이내)

- [ ] [후속 개선] - [예상 영향]
- [ ] [문서화 작업] - [대상 독자]

### 장기 (향후 반복)

- [ ] [개선 아이디어] - [대략적인 추정]
- [ ] [기술 부채 항목] - [해결하지 않을 경우 위험]

## 최종 문서 동기화 체크리스트

- [ ] 모든 생성/수정/삭제된 파일이 구조 문서에 반영됨
- [ ] current.md가 완료 상태로 업데이트됨
- [ ] review/000_overview.md에 이 검토가 추가됨
- [ ] history 문서가 생성/업데이트됨
- [ ] 모든 DKB 항목이 DKB/000_overview.md에 나열됨
- [ ] 모든 사전 항목이 lexicon/000_overview.md에 나열됨
- [ ] 모든 파일 경로가 정확하고 접근 가능함
```

## 구조 문서화 지침

### 목적

`structure/` 디렉토리는 코드베이스의 모든 중요한 파일 및 디렉토리에 대한 포괄적인 문서를 제공하여 실제 프로젝트 구조의 1:1 매핑을 유지합니다.

### 구조 디렉토리 구성

```
structure/
├── 000_overview.md         # 통계가 포함된 완전한 프로젝트 맵
├── src/
│   ├── components.md      # props 및 사용법이 포함된 모든 UI 컴포넌트
│   ├── services.md        # 서비스 계층 문서화
│   ├── hooks.md          # 사용자 정의 훅 및 해당 의존성
│   └── utils.md          # 유틸리티 함수 및 헬퍼
├── architecture.puml      # 시스템 아키텍처 다이어그램
├── data-flow.puml        # 컴포넌트 간 데이터 흐름
└── dependencies.puml     # 의존성 그래프
```

### 구조 문서 형식

```markdown
# [디렉토리/파일 이름] 구조

## 개요

[이 모듈의 목적과 책임]

## 파일

| 파일                                           | 목적          | 크기  | 마지막 수정 |
| ---------------------------------------------- | ------------- | ----- | ----------- |
| [Component.tsx](src/components/Component.tsx)  | 메인 컴포넌트 | 2.5KB | 2024-01-15  |
| [Component.test.tsx](tests/Component.test.tsx) | 테스트 스위트 | 3.1KB | 2024-01-15  |

## 의존성

- 외부: react, axios, lodash
- 내부:
  - [api.service.ts](src/services/api.service.ts)
  - [validation.ts](src/utils/validation.ts)
  - 구조 문서: [.claude/structure/src/services.md](.claude/structure/src/services.md)

## 내보내기

\`\`\`typescript
export interface ComponentProps { ... }
export const Component: React.FC<ComponentProps>
export const useComponentLogic: () => ComponentReturn
\`\`\`

## 주요 함수/컴포넌트

### `Component`

- **목적**: [무엇을 하는지]
- **Props**: [타입이 포함된 props 목록]
- **상태**: [상태 관리 접근 방식]
- **사이드 이펙트**: [API 호출, 구독]

## 아키텍처 다이어그램

[컴포넌트 관계, 데이터 흐름 또는 시스템 아키텍처를 시각화하기 위해 필요에 따라 PlantUML 다이어그램 생성]

## 업데이트 히스토리

- 2024-01-15: 초기 생성
- 2024-01-16: 오류 처리 추가

## 관련 문서

- 계획: [.claude/plan/001_feature_x.md](.claude/plan/001_feature_x.md)
- 검토: [.claude/review/001_feature_x_review.md](.claude/review/001_feature_x_review.md)
- DKB: [.claude/DKB/001_pattern.md](.claude/DKB/001_pattern.md)
```

### 동기화 규칙 (강화)

#### 1. 파일 생성 시

```
즉시 수행:
1. 구조 문서에 파일 추가 (동일 작업 내)
2. structure/000_overview.md 업데이트
3. current.md의 "코드 변경 상태" 업데이트
4. 파일이 속한 디렉토리 구조 문서 업데이트
```

#### 2. 파일 수정 시

```
즉시 수행:
1. 파일 크기, 마지막 수정 시간 업데이트 (저장 직후)
2. 변경된 경우 내보내기/가져오기 업데이트
3. 수정된 경우 의존성 업데이트
4. "업데이트 히스토리"에 변경 사항 추가
5. current.md 업데이트
```

#### 3. 파일 삭제 시

```
즉시 수행:
1. 구조 문서에서 사용 중단으로 표시
2. 7일 후 제거 (히스토리에 기록)
3. 모든 링크 정리
4. current.md 업데이트
```

#### 4. 코드 변경 시

```
즉시 수행:
1. structure/에서 영향받는 컴포넌트 업데이트
2. plan/todo/review 문서의 링크 업데이트
3. 구조가 변경된 경우 아키텍처 다이어그램 업데이트
4. current.md의 "코드 변경 상태" 업데이트
5. 모든 관련 개요 파일 업데이트
```

#### 5. 원자적 동기화 규칙

```
⚠️ 절대 규칙:
현재 변경 사항을 동기화하지 않고 다음 작업으로 절대 진행하지 않음

작업 순서:
1. 코드 변경
2. 즉시 구조 문서 업데이트
3. 즉시 current.md 업데이트
4. 즉시 관련 개요 업데이트
5. 동기화 체크리스트 확인
6. ✓ 모든 동기화 완료 후 다음 작업 진행
```

### PlantUML 다이어그램 지침

#### 다이어그램을 생성해야 할 때

시각적 표현이 명확성을 더할 때마다 PlantUML을 사용하여 다이어그램을 생성:

- 계획의 아키텍처 결정
- 시스템 컴포넌트 관계
- 서비스 간 데이터 흐름
- 상태 전환
- 작업 순서
- 배포 토폴로지
- 시각화로 이익을 얻는 모든 복잡한 상호 작용

#### 일반적인 다이어그램 유형

1. **아키텍처 다이어그램** - 시스템 컴포넌트 및 관계
2. **시퀀스 다이어그램** - 시간에 따른 상호 작용 흐름
3. **컴포넌트 다이어그램** - 모듈 의존성
4. **배포 다이어그램** - 인프라 토폴로지
5. **상태 다이어그램** - 상태 전환
6. **플로우 차트** - 프로세스 흐름 및 의사 결정 트리

#### PlantUML 예제

```plantuml
@startuml
!theme plain
!define RECTANGLE class

' 의미 있는 색상 사용
!define UI_COLOR #ADD8E6
!define SERVICE_COLOR #90EE90
!define DB_COLOR #FFE4B5

package "Frontend" <<Rectangle>> #UI_COLOR {
  [React App] --> [Redux Store]
  [React App] --> [API Client]
}

package "Backend" <<Rectangle>> #SERVICE_COLOR {
  [API Gateway] --> [Auth Service]
  [API Gateway] --> [Business Logic]
  [Business Logic] --> [Database] #DB_COLOR
}

[API Client] --> [API Gateway] : HTTPS

note bottom : 생성일: 2024-01-15\n목적: 시스템 아키텍처
@enduml
```

#### 모범 사례

- 모든 다이어그램에서 일관된 색상 체계 사용
- 노트에 생성 날짜와 목적 포함
- 다이어그램을 집중적으로 유지 (최대 20개 요소)
- 명확하고 설명적인 레이블 사용
- 복잡한 다이어그램에 범례 추가
- 더 나은 품질을 위해 SVG 형식 생성
- 아키텍처 변경 시 다이어그램 업데이트

## DKB (도메인 지식 기반) 지침

### DKB에 추가해야 할 때

- 명확하지 않은 기술 솔루션 (구현에 2시간 이상 소요)
- 절충안이 있는 아키텍처 결정
- 벤치마크가 포함된 성능 최적화
- 복잡한 비즈니스 로직 설명
- 통합 특이사항 및 우회 방법
- 프로젝트별 적응이 포함된 디자인 패턴

### DKB 문서 구조

```markdown
# [번호]\_[주제 이름]

## 카테고리

[아키텍처/패턴/통합/성능/비즈니스 로직/보안]

## 컨텍스트

- 관련: [.claude/plan/XXX_plan.md]
- 트리거: [.claude/review/XXX_review.md]
- 발견 날짜: YYYY-MM-DD
- 소요 시간: [이것을 알아내는 데 걸린 시간]

## 문제 설명

[이 지식이 해결하는 문제]

## 솔루션

[이 접근 방식이 선택된 이유와 함께 자세한 설명]

## 구현

\`\`\`language
// 복사하여 붙여넣을 수 있는 실제 코드 예제
// 가져오기 및 전체 컨텍스트 포함
\`\`\`

## 성능 영향

- 이전: [메트릭]
- 이후: [메트릭]
- 절충안: [희생된 것]

## 주의사항

- [일반적인 실수 1 및 피하는 방법]
- [일반적인 실수 2 및 피하는 방법]

## 관련 문서

- 사전: [.claude/lexicon/XXX_terms.md]
- 구현: [.claude/review/XXX_review.md]
- 유사 패턴: [.claude/DKB/YYY_pattern.md]

## 문서 동기화

- [ ] DKB/000_overview.md에 추가됨
- [ ] current.md에 링크 추가됨
- [ ] 관련 검토 문서에서 참조됨
```

## 사전 지침

### 사전에 추가해야 할 때

- 프로젝트별 용어
- 도메인별 용어
- 약어 및 약어
- 명확히 해야 할 기술 개념

### 사전 항목 구조

```markdown
## [용어]

- **정의**: [명확하고 간결한 정의]
- **컨텍스트**: [이 용어가 사용되는 때/장소]
- **예제**: [사용 예제]
- **관련 용어**: [용어1], [용어2]
- **처음 사용**: [.claude/plan/XXX_plan.md]
- **관련 파일**: [src/...] - [구조 문서](.claude/structure/...)

## 문서 동기화

- [ ] lexicon/000_overview.md에 추가됨
- [ ] current.md에 링크 추가됨
```

## 히스토리 문서화

### 구조

```markdown
# [번호]_[날짜]_[간략한 설명]

## 타임라인

- 요청 수신: [DateTime]
- 계획 완료: [DateTime]
- 구현 시작: [DateTime]
- 검토 완료: [DateTime]

## 생성된 문서

- 계획: [.claude/plan/XXX_plan.md]
- 할 일: [.claude/todo/XXX_todo.md]
- 검토: [.claude/review/XXX_review.md]
- DKB 항목: [목록]
- 사전 항목: [목록]

## 요약

[전체 작업 주기의 간략한 요약]

## 문서 동기화 이력

- [DateTime]: current.md 업데이트 (X회)
- [DateTime]: 구조 문서 동기화 (Y개 파일)
- [DateTime]: DKB 항목 추가 (Z개)
```

## Dev Action 문서화

### Dev Action을 생성해야 할 때

- 외부 서비스 설정 필요
- 수동 구성 필요
- 자격 증명 또는 액세스 필요
- 인프라 변경
- 타사 통합

### 구조

```markdown
# [번호]\_[필요한 액션]

## 우선순위

[높음/중간/낮음]

## 컨텍스트

- 요청자: [.claude/plan/XXX_plan.md]
- 차단: [이것이 차단하는 것]
- current.md 참조: [.claude/current/current.md]

## 필요한 액션

[개발자가 수행해야 할 작업의 자세한 설명]

## 단계

1. [단계 1]
2. [단계 2]

## 검증

- [ ] [완료 확인 방법]

## 상태

- 생성: [날짜]
- 할당: [알려진 경우 개발자 이름]
- 완료: [완료된 날짜]

## 문서 동기화

- [ ] dev_action/000_overview.md에 추가됨
- [ ] current.md의 "차단 요소" 섹션에 링크됨
```

## 도구 사용

### 필수 도구

이 프로젝트에서 작업할 때 항상 사용:

- 코드 탐색 및 수정을 위한 `mcp__serena__*` 도구
- 문서 조회를 위한 `mcp__context7__*` 도구
- 복잡한 문제 해결을 위한 `mcp__sequential-thinking__sequentialthinking`

### 도구 사용 지침

1. **Sequential Thinking** (`mcp__sequential-thinking__sequentialthinking`)

   - 사용 대상: 3가지 옵션을 생성할 때 계획 단계
   - 사용 대상: 2개 이상의 대안이 있는 모든 결정
   - 사용 대상: 복잡한 문제 분해
   - 사용 대상: 아키텍처 디자인 결정
   - 솔루션이 1시간 이상 걸리면 DKB에 사고 과정 문서화

2. **Serena** (`mcp__serena__*`)

   - `find_symbol`: 수정 전 함수, 클래스, 메서드 찾기
   - `search_for_pattern`: 코드베이스 전체에서 사용 패턴 찾기
   - `replace_symbol_body`: 기존 코드 수정
   - `insert_before/after_symbol`: 새 코드 섹션 추가
   - 컨텍스트를 이해하기 위해 코드 변경 전 항상 serena 사용

3. **Context7** (`mcp__context7__*`)
   - `resolve-library-id`: 외부 라이브러리에 대한 문서 찾기
   - `get-library-docs`: 특정 문서 섹션 검색
   - 새 라이브러리 통합 구현 시 사용
   - 팀 참조를 위해 DKB에서 유용한 결과 문서화

## 중요한 워크플로우 규칙

### 1. 계획 단계를 건너뛰지 말 것

- 항상 전체 분석과 함께 정확히 3가지 옵션 생성
- 정량적 비교 포함
- 진행하기 전에 명시적 사용자 승인 대기

### 2. 작업하면서 문서화 (강화)

```
⚠️ 즉시 문서화 규칙:

각 하위 작업 완료 직후:
1. 할 일 진행 상황 체크
2. current.md "현재 상태" 업데이트
3. 구조 문서 동기화
4. 개요 파일 업데이트

새 패턴 발견 직후:
1. DKB 항목 생성
2. DKB/000_overview.md 업데이트
3. current.md에 링크 추가

차단 요소 발견 즉시:
1. dev_action 생성
2. dev_action/000_overview.md 업데이트
3. current.md "차단 요소" 섹션 업데이트

일괄 처리 절대 금지!
```

### 3. 문서 동기화 유지 (강화)

```
⚠️ 원자적 동기화 원칙:

파일 작업 직후:
- 구조 문서 즉시 업데이트
- current.md 즉시 업데이트
- 개요 파일 즉시 업데이트
- 다음 작업 전 동기화 체크리스트 확인

동일한 원자적 작업에서:
- 상호 참조 업데이트
- 양방향 링크 추가
- 모든 경로 검증

현재 동기화 완료 없이 다음 작업 이동 절대 금지!
동기화는 별도 활동이 아닌 작업의 필수 부분!
```

### 4. 엄격한 번호 매기기 유지

- 3자리 형식 (001, 002 등)
- 번호 재사용 금지
- 생성 날짜별 순차적 순서 유지

### 5. 파일 경로로 모든 것을 링크 (경로 규칙)

```
경로 규칙:

실제 프로젝트 파일:
- 절대 경로 사용 금지
- 프로젝트 루트 기준 상대 경로 사용
- 예: src/components/Auth.tsx

.claude 디렉토리 문서:
- .claude/ 루트부터 시작
- 예: .claude/plan/001_plan.md

링크 작성:
- 실제 파일: [Auth 컴포넌트](src/components/Auth.tsx)
- 구조 문서: [컴포넌트 문서](.claude/structure/src/components.md)
- 계획 문서: [기능 계획](.claude/plan/001_feature.md)

모든 링크는 상대 경로로!
```

### 6. 모든 지식을 즉시 캡처

```
⚠️ 즉시 캡처 규칙:

문제 해결 직후:
1. DKB에 즉시 문서화
2. 솔루션까지의 과정 기록
3. 소요 시간 기록

구글링한 경우:
1. 솔루션 사용 전 DKB 추가
2. 출처 링크 포함
3. 우리 프로젝트 적용 방법 기록

실수한 경우:
1. 수정 전 교훈 문서화
2. 왜 실수했는지 분석
3. 예방 방법 기록

지식 캡처는 사후가 아닌 작업의 일부!
```

### 7. 명시적 승인 받기

- 할 일 생성 전 계획 승인
- 구현 전 할 일 승인
- 완료 표시 전 검토 확인

### 8. 지정된 도구를 일관되게 사용

- 모든 코드 탐색에 serena 사용 (grep/find 사용 금지)
- 모든 외부 문서에 context7 사용
- 다중 옵션 결정에 sequential-thinking 사용

## 각 작업에 대한 체크리스트

### 시작하기 전

- [ ] **Context compact 발생 시**: Context Compact 복구 프로토콜 따르기
- [ ] 세션 컨텍스트로 current/current.md 생성/업데이트
  - [ ] 모든 관련 문서 경로 포함
  - [ ] "활성 문서" 섹션 완전히 작성
  - [ ] "다음 즉시 수행할 단계" 명확히 작성
- [ ] 다음을 포함하여 정확히 3가지 옵션으로 계획 생성:
  - [ ] 각 옵션에 대한 정량적 메트릭
  - [ ] 비교 분석 표
  - [ ] 증거와 함께 구체적인 권장 사항
  - [ ] 옵션을 명확히 하는 데 도움이 되는 경우 다이어그램
- [ ] 사용자의 근거와 함께 명시적 계획 승인 받기
- [ ] **계획 승인 즉시 current.md 업데이트**
- [ ] 다음을 포함하는 할 일 생성:
  - [ ] 단계당 2-3개의 구현 접근 방식
  - [ ] 시간/일 단위의 시간 추정
  - [ ] 구체적인 의존성 및 차단 요소
  - [ ] 영향받는 모든 코드의 파일 경로
- [ ] 명시적 할 일 승인 받기
- [ ] **할 일 승인 즉시 current.md "활성 문서" 업데이트**
- [ ] 시작 타임스탬프로 히스토리 업데이트

### 작업 중 (강화)

- [ ] 2개 이상의 옵션이 있는 모든 결정에 sequential thinking 사용
- [ ] **각 원자적 작업 완료 즉시 (일괄 처리 금지)**:
  - [ ] 완료된 하위 작업으로 할 일 업데이트
  - [ ] current.md "현재 상태" 섹션 업데이트
  - [ ] current.md "다음 즉시 수행할 단계" 업데이트
  - [ ] 파일이 변경된 경우 구조 문서 즉시 동기화
  - [ ] 관련 개요 파일 즉시 업데이트
  - [ ] 새 용어 발견 시 사전에 즉시 추가
  - [ ] 패턴 발견 시 DKB에 즉시 문서화
  - [ ] current.md "문서 동기화 체크리스트" 완료
- [ ] **다음 하위 작업 시작 전 필수 확인**:
  - [ ] 모든 문서가 동기화되었는지 확인
  - [ ] current.md가 현재 상태를 정확히 반영하는지 확인
  - [ ] 모든 링크가 작동하는지 확인
  - [ ] 보류 중인 업데이트가 없는지 확인
  - [ ] ⚠️ 확인 완료 전 다음 작업 시작 금지!
- [ ] 각 코드 변경에 대해:
  - [ ] 다음 편집 전 구조 문서 즉시 업데이트
  - [ ] current.md 즉시 업데이트
  - [ ] 파일 경로 및 줄 번호 포함
  - [ ] 테스트 실행 및 결과 문서화
- [ ] 차단된 경우 즉시 dev_action 생성 (대기하지 않음)
  - [ ] dev_action/000_overview.md 업데이트
  - [ ] current.md "차단 요소" 섹션 업데이트

### 완료 후 (강화)

- [ ] 마지막 작업 직후 즉시 검토 생성:
  - [ ] 줄 번호와 함께 생성/수정/삭제된 모든 파일
  - [ ] 각 파일의 구조 문서 경로 포함
  - [ ] 성능 메트릭 (이전/이후)
  - [ ] 테스트 커버리지 백분율
  - [ ] 3-5개의 구체적인 사용자 피드백 질문
  - [ ] 아키텍처/플로우가 변경된 경우 다이어그램
- [ ] **최종 동기화 (검토 제출 전) - 필수!**:
  - [ ] structure/가 현재 코드베이스와 100% 일치하는지 확인
  - [ ] 모든 DKB 항목이 링크되고 DKB/000_overview.md에 나열됨
  - [ ] 사전이 완성되고 lexicon/000_overview.md에 나열됨
  - [ ] 모든 개요 파일 업데이트됨
  - [ ] 모든 상호 참조가 작동하는지 검증
  - [ ] current.md가 완료 상태로 업데이트됨
  - [ ] ⚠️ 모든 동기화 완료 전 검토 제출 금지!
- [ ] 명시적 사용자 확인 받기
- [ ] 사용자 피드백 후:
  - [ ] 즉시 변경 사항 구현
  - [ ] 영향받는 모든 문서 즉시 업데이트
  - [ ] 작업 종료 전 재동기화
- [ ] 완료 세부사항으로 히스토리 업데이트
- [ ] current.md를 다음 작업을 위해 준비

## ⚠️ 최종 경고: 절대 규칙

### 다음을 절대 하지 말 것:

1. ❌ 문서 동기화 없이 다음 작업 시작
2. ❌ 여러 작업을 완료한 후 일괄 문서화
3. ❌ Context compact 후 문서를 읽지 않고 작업 시작
4. ❌ current.md 없이 작업 진행
5. ❌ 경로 규칙을 무시하고 잘못된 경로 사용
6. ❌ 새 지식을 발견하고도 DKB/사전에 추가하지 않음
7. ❌ 차단 요소를 발견하고도 dev_action 생성하지 않음
8. ❌ 구조 문서가 코드와 일치하지 않는 상태 방치

### 항상 기억할 것:

✅ 문서화는 작업의 필수 부분
✅ 동기화는 선택이 아닌 필수
✅ current.md는 작업 연속성의 핵심
✅ Context compact 후 반드시 문서 먼저 읽기
✅ 모든 경로는 정확하고 일관되게
✅ 지식은 즉시 캡처
✅ 차단 요소는 즉시 문서화
